{
  "info": {
    "name": "Click-se Sistema - Planos e Funcionalidades",
    "description": "Collection com todas as APIs do sistema de planos e funcionalidades",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "name": "Webhook Hotmart - Sandbox",
      "item": [
        {
          "name": "Sandbox - Testar Webhook (GET - Mockado)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/sandbox?email=usuario@exemplo.com&plano=BASICO_MENSAL&evento=PURCHASE_APPROVED",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "sandbox"],
              "query": [
                { "key": "email", "value": "usuario@exemplo.com" },
                { "key": "plano", "value": "BASICO_MENSAL" },
                { "key": "evento", "value": "PURCHASE_APPROVED" }
              ]
            },
            "description": "Endpoint GET para testar o webhook mockado do Hotmart no sandbox"
          }
        },
        {
          "name": "Sandbox - PURCHASE_APPROVED",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"PURCHASE_APPROVED\",\n  \"data\": {\n    \"subscription\": {\n      \"subscription_code\": \"SUB-SANDBOX-123456\",\n      \"plan\": { \"plan_code\": \"BASICO_MENSAL\" },\n      \"buyer\": { \"email\": \"cliente@exemplo.com\", \"name\": \"Nome do Cliente\" },\n      \"status\": \"TRIAL\",\n      \"trial_period_end\": \"2025-01-15T00:00:00Z\",\n      \"date_next_charge\": \"2025-01-22T00:00:00Z\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/sandbox",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "sandbox"]
            }
          }
        },
        {
          "name": "Sandbox - PURCHASE_COMPLETED",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"PURCHASE_COMPLETED\",\n  \"data\": {\n    \"subscription\": {\n      \"subscription_code\": \"SUB-SANDBOX-123456\",\n      \"plan\": { \"plan_code\": \"BASICO_MENSAL\" },\n      \"buyer\": { \"email\": \"cliente@exemplo.com\", \"name\": \"Nome do Cliente\" },\n      \"status\": \"ACTIVE\",\n      \"date_next_charge\": \"2025-02-22T00:00:00Z\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/sandbox",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "sandbox"]
            }
          }
        },
        {
          "name": "Sandbox - PURCHASE_RENEWED (CHARGED/UPDATED)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"PURCHASE_CHARGED\",\n  \"data\": {\n    \"subscription\": {\n      \"subscription_code\": \"SUB-SANDBOX-123456\",\n      \"plan\": { \"plan_code\": \"BASICO_MENSAL\" },\n      \"buyer\": { \"email\": \"cliente@exemplo.com\" },\n      \"status\": \"ACTIVE\",\n      \"date_next_charge\": \"2025-03-22T00:00:00Z\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/sandbox",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "sandbox"]
            }
          }
        },
        {
          "name": "Sandbox - PURCHASE_CANCELLED",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"PURCHASE_CANCELLED\",\n  \"data\": {\n    \"subscription\": {\n      \"subscription_code\": \"SUB-SANDBOX-123456\",\n      \"plan\": { \"plan_code\": \"BASICO_MENSAL\" },\n      \"buyer\": { \"email\": \"cliente@exemplo.com\" },\n      \"status\": \"CANCELLED\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/sandbox",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "sandbox"]
            }
          }
        },
        {
          "name": "Sandbox - PURCHASE_EXPIRED",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"PURCHASE_EXPIRED\",\n  \"data\": {\n    \"subscription\": {\n      \"subscription_code\": \"SUB-SANDBOX-123456\",\n      \"plan\": { \"plan_code\": \"BASICO_MENSAL\" },\n      \"buyer\": { \"email\": \"cliente@exemplo.com\" },\n      \"status\": \"EXPIRED\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/sandbox",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "sandbox"]
            }
          }
        },
        {
          "name": "Sandbox - SUBSCRIPTION_SUSPENDED (Compat√≠vel)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"SUBSCRIPTION_SUSPENDED\",\n  \"data\": {\n    \"subscription\": {\n      \"code\": \"SUB-SANDBOX-123456\",\n      \"plan\": { \"code\": \"BASICO_MENSAL\" },\n      \"buyer\": { \"email\": \"cliente@exemplo.com\" },\n      \"status\": \"SUSPENDED\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/sandbox",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "sandbox"]
            }
          }
        }
      ]
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Funcionalidades",
      "item": [
        {
          "name": "Listar Funcionalidades",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/funcionalidades",
              "host": ["{{base_url}}"],
              "path": ["api", "funcionalidades"]
            }
          }
        },
        {
          "name": "Criar Funcionalidade",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"codigo\": \"EVENTOS_ILIMITADOS\",\n  \"nome\": \"Eventos Ilimitados\",\n  \"descricao\": \"Criar eventos sem limite\",\n  \"categoria\": \"EVENTOS\",\n  \"ativo\": true,\n  \"ordem\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/funcionalidades",
              "host": ["{{base_url}}"],
              "path": ["api", "funcionalidades"]
            }
          }
        },
        {
          "name": "Buscar Funcionalidade por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/funcionalidades/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "funcionalidades", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Atualizar Funcionalidade",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"Eventos Ilimitados (Atualizado)\",\n  \"ativo\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/funcionalidades/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "funcionalidades", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Deletar Funcionalidade",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/funcionalidades/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "funcionalidades", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Planos",
      "item": [
        {
          "name": "Listar Planos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/planos?ativos=true",
              "host": ["{{base_url}}"],
              "path": ["api", "planos"],
              "query": [
                {
                  "key": "ativos",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Criar Plano",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"Basico\",\n  \"descricao\": \"Plano ideal para comecar a usar o sistema\",\n  \"codigoHotmart\": \"BASICO_MENSAL\",\n  \"funcionalidades\": [\"func_id_1\", \"func_id_2\"],\n  \"preco\": 49.90,\n  \"intervalo\": \"mensal\",\n  \"ativo\": true,\n  \"destaque\": true,\n  \"limiteEventos\": 10,\n  \"limiteClientes\": 50,\n  \"limiteUsuarios\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/planos",
              "host": ["{{base_url}}"],
              "path": ["api", "planos"]
            }
          }
        },
        {
          "name": "Buscar Plano por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/planos/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "planos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Atualizar Plano",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"B√°sico (Atualizado)\",\n  \"preco\": 59.90,\n  \"ativo\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/planos/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "planos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Deletar Plano",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/planos/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "planos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Assinaturas",
      "item": [
        {
          "name": "Buscar Minha Assinatura",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/assinaturas",
              "host": ["{{base_url}}"],
              "path": ["api", "assinaturas"]
            }
          }
        },
        {
          "name": "Buscar Assinatura por User ID (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/assinaturas?userId=user_id_aqui",
              "host": ["{{base_url}}"],
              "path": ["api", "assinaturas"],
              "query": [
                {
                  "key": "userId",
                  "value": "user_id_aqui"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Usu√°rios e Assinaturas",
      "item": [
        {
          "name": "Obter Status do Plano",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/users/:id/assinatura",
              "host": ["{{base_url}}"],
              "path": ["api", "users", ":id", "assinatura"],
              "variable": [
                {
                  "key": "id",
                  "value": "",
                  "description": "ID do usu√°rio"
                }
              ]
            },
            "description": "Obt√©m status completo do plano do usu√°rio (pr√≥prio usu√°rio ou admin)"
          }
        },
        {
          "name": "Atualizar Assinatura do Usu√°rio (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"assinaturaId\": \"assinatura_id_aqui\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/:id/assinatura",
              "host": ["{{base_url}}"],
              "path": ["api", "users", ":id", "assinatura"],
              "variable": [
                {
                  "key": "id",
                  "value": "",
                  "description": "ID do usu√°rio"
                }
              ]
            },
            "description": "Atualiza assinatura do usu√°rio (apenas admin)"
          }
        },
        {
          "name": "Sincronizar Plano do Usu√°rio (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sincronizar\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/:id/assinatura",
              "host": ["{{base_url}}"],
              "path": ["api", "users", ":id", "assinatura"],
              "variable": [
                {
                  "key": "id",
                  "value": "",
                  "description": "ID do usu√°rio"
                }
              ]
            },
            "description": "For√ßa sincroniza√ß√£o dos dados do plano no usu√°rio (apenas admin)"
          }
        }
      ]
    },
    {
      "name": "Webhook Hotmart",
      "item": [
        {
          "name": "Testar Webhook (GET - Mockado)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart?email=usuario@exemplo.com&plano=PROFISSIONAL_MENSAL&evento=SUBSCRIPTION_PURCHASE",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart"],
              "query": [
                {
                  "key": "email",
                  "value": "usuario@exemplo.com"
                },
                {
                  "key": "plano",
                  "value": "PROFISSIONAL_MENSAL"
                },
                {
                  "key": "evento",
                  "value": "SUBSCRIPTION_PURCHASE"
                }
              ]
            },
            "description": "Endpoint GET para testar o webhook mockado da Hotmart"
          }
        },
        {
          "name": "Webhook Hotmart (POST - Produ√ß√£o)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"SUBSCRIPTION_PURCHASE\",\n  \"data\": {\n    \"subscription\": {\n      \"code\": \"SUB-123456\",\n      \"plan\": {\n        \"code\": \"PROFISSIONAL_MENSAL\"\n      },\n      \"buyer\": {\n        \"email\": \"cliente@exemplo.com\",\n        \"name\": \"Nome do Cliente\"\n      },\n      \"status\": \"TRIAL\",\n      \"trial_period_end\": \"2025-01-15T00:00:00Z\",\n      \"date_next_charge\": \"2025-01-22T00:00:00Z\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart"]
            },
            "description": "Endpoint POST para receber webhooks da Hotmart (quando integra√ß√£o real for feita)"
          }
        },
        {
          "name": "Webhook - Assinatura Ativada",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"SUBSCRIPTION_ACTIVATED\",\n  \"data\": {\n    \"subscription\": {\n      \"code\": \"SUB-123456\",\n      \"plan\": {\n        \"code\": \"PROFISSIONAL_MENSAL\"\n      },\n      \"buyer\": {\n        \"email\": \"cliente@exemplo.com\",\n        \"name\": \"Nome do Cliente\"\n      },\n      \"status\": \"ACTIVE\",\n      \"date_next_charge\": \"2025-02-22T00:00:00Z\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart"]
            }
          }
        },
        {
          "name": "Webhook - Assinatura Cancelada",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"SUBSCRIPTION_CANCELLED\",\n  \"data\": {\n    \"subscription\": {\n      \"code\": \"SUB-123456\",\n      \"plan\": {\n        \"code\": \"PROFISSIONAL_MENSAL\"\n      },\n      \"buyer\": {\n        \"email\": \"cliente@exemplo.com\",\n        \"name\": \"Nome do Cliente\"\n      },\n      \"status\": \"CANCELLED\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart"]
            }
          }
        },
        {
          "name": "Webhook - Assinatura Expirada",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"SUBSCRIPTION_EXPIRED\",\n  \"data\": {\n    \"subscription\": {\n      \"code\": \"SUB-123456\",\n      \"plan\": {\n        \"code\": \"PROFISSIONAL_MENSAL\"\n      },\n      \"buyer\": {\n        \"email\": \"cliente@exemplo.com\",\n        \"name\": \"Nome do Cliente\"\n      },\n      \"status\": \"EXPIRED\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart"]
            }
          }
        },
        {
          "name": "Webhook - Assinatura Renovada",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"SUBSCRIPTION_RENEWED\",\n  \"data\": {\n    \"subscription\": {\n      \"code\": \"SUB-123456\",\n      \"plan\": {\n        \"code\": \"PROFISSIONAL_MENSAL\"\n      },\n      \"buyer\": {\n        \"email\": \"cliente@exemplo.com\",\n        \"name\": \"Nome do Cliente\"\n      },\n      \"status\": \"ACTIVE\",\n      \"date_next_charge\": \"2025-03-22T00:00:00Z\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart"]
            }
          }
        },
        {
          "name": "Webhook - Assinatura Suspensa",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"SUBSCRIPTION_SUSPENDED\",\n  \"data\": {\n    \"subscription\": {\n      \"code\": \"SUB-123456\",\n      \"plan\": {\n        \"code\": \"PROFISSIONAL_MENSAL\"\n      },\n      \"buyer\": {\n        \"email\": \"cliente@exemplo.com\",\n        \"name\": \"Nome do Cliente\"\n      },\n      \"status\": \"SUSPENDED\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart"]
            }
          }
        }
      ]
    },
    {
      "name": "Pagamentos",
      "item": [
        {
          "name": "Atualizar Pagamentos (Normaliza√ß√£o)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"seu_user_id_aqui\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/pagamentos/atualiza-pagamento",
              "host": ["{{base_url}}"],
              "path": ["api", "pagamentos", "atualiza-pagamento"]
            },
            "description": "Normaliza pagamentos existentes da collection de eventos para a collection global. Busca todos os pagamentos em users/{userId}/eventos/{eventoId}/pagamentos e os cria em users/{userId}/pagamentos. Pode ser executado m√∫ltiplas vezes (idempotente).\n\nOp√ß√µes de autentica√ß√£o:\n1. Via sess√£o (se estiver logado no navegador)\n2. Via API key (x-api-key header) + userId no body\n3. Em modo dev, apenas userId no body"
          }
        }
      ]
    },
    {
      "name": "Custos",
      "item": [
        {
          "name": "Atualizar Custos (Normaliza√ß√£o)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"seu_user_id_aqui\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/custos/atualiza-custo",
              "host": ["{{base_url}}"],
              "path": ["api", "custos", "atualiza-custo"]
            },
            "description": "Normaliza custos existentes da collection de eventos para a collection global. Busca todos os custos em users/{userId}/eventos/{eventoId}/custos e os cria em users/{userId}/custos. Pode ser executado m√∫ltiplas vezes (idempotente).\n\nOp√ß√µes de autentica√ß√£o:\n1. Via sess√£o (se estiver logado no navegador)\n2. Via API key (x-api-key header) + userId no body\n3. Em modo dev, apenas userId no body"
          }
        },
        {
          "name": "Atualizar Servi√ßos (Normaliza√ß√£o)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"seu_user_id_aqui\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/servicos/atualiza-servico",
              "host": ["{{base_url}}"],
              "path": ["api", "servicos", "atualiza-servico"]
            },
            "description": "Normaliza servi√ßos existentes da collection de eventos para a collection global. Busca todos os servi√ßos em users/{userId}/eventos/{eventoId}/servicos e os cria em users/{userId}/servicos. Pode ser executado m√∫ltiplas vezes (idempotente).\n\nOp√ß√µes de autentica√ß√£o:\n1. Via sess√£o (se estiver logado no navegador)\n2. Via API key (x-api-key header) + userId no body\n3. Em modo dev, apenas userId no body"
          }
        }
      ]
    },
    {
      "name": "Planos",
      "item": [
        {
          "name": "Alterar Plano",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"usuario@exemplo.com\",\n  \"codigoHotmart\": \"PROFISSIONAL_MENSAL\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/alterar-plano",
              "host": ["{{base_url}}"],
              "path": ["api", "alterar-plano"]
            },
            "description": "Altera o plano de um usu√°rio pelo email e codigoHotmart. Se o usu√°rio n√£o tiver plano, cria uma nova assinatura. Se j√° tiver, atualiza para o novo plano.\n\nPar√¢metros:\n- email (string): Email do usu√°rio\n- codigoHotmart (string): C√≥digo do plano na Hotmart (ex: PROFISSIONAL_MENSAL, BASICO_MENSAL, PREMIUM_MENSAL)\n\nOp√ß√µes de autentica√ß√£o:\n1. Via sess√£o admin\n2. Via API key (x-api-key header)\n3. Em modo dev, sem autentica√ß√£o"
          }
        }
      ]
    },
    {
      "name": "Seed e Setup",
      "item": [
        {
          "name": "Seed Funcionalidades e Planos (Incremental)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{base_url}}/api/seed/funcionalidades-planos",
              "host": ["{{base_url}}"],
              "path": ["api", "seed", "funcionalidades-planos"]
            },
            "description": "Cria ou atualiza funcionalidades e planos de forma incremental (sem remover dados existentes).\n\nüìã Cria/Atualiza:\n- 14 funcionalidades\n- 3 planos (B√°sico, Profissional, Premium)\n\nüí° Use este endpoint para atualiza√ß√µes sem perder dados existentes. Para reset completo, use 'Seed com Reset'."
          }
        },
        {
          "name": "Criar Usu√°rio Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{base_url}}/api/admin/create-default-admin",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "create-default-admin"]
            },
            "description": "Cria usu√°rio admin@clickse.com com senha 123456"
          }
        },
        {
          "name": "Seed com Reset (Reformula√ß√£o 2025)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{base_url}}/api/seed/funcionalidades-planos?reset=true",
              "host": ["{{base_url}}"],
              "path": ["api", "seed", "funcionalidades-planos"],
              "query": [
                {
                  "key": "reset",
                  "value": "true",
                  "description": "Limpa tudo e recria do zero"
                }
              ]
            },
            "description": "üîÑ EXECUTA SEED COM RESET COMPLETO - Reformula√ß√£o dos Planos 2025\n\nRemove todas as funcionalidades e planos existentes e recria do zero com:\n\nüìã Funcionalidades (14 total):\n- EVENTOS_LIMITADOS\n- CLIENTES_LIMITADOS\n- PAGAMENTOS_REGISTRAR\n- PAGAMENTOS_COMPROVANTES\n- PAGAMENTOS_CONTROLE_PADRAO\n- PAGAMENTOS_CONTROLE_PERSONALIZADO\n- FLUXO_CAIXA\n- RELATORIOS_BASICOS\n- RELATORIOS_AVANCADOS\n- RELATORIOS_FULL\n- TIPOS_PADRAO\n- TIPOS_PERSONALIZADO\n- UPLOAD_ANEXOS\n- BOTAO_COPIAR\n- CONTRATO_AUTOMATIZADO\n\nüì¶ Planos:\n1. B√ÅSICO: 10 eventos/m√™s, 100 clientes/ano\n2. PROFISSIONAL: 50 eventos/m√™s, 600 clientes/ano\n3. PREMIUM: 400 eventos/m√™s, 4.800 clientes/ano\n\n‚ö†Ô∏è ATEN√á√ÉO: Este endpoint remove TODOS os dados existentes de funcionalidades e planos antes de recriar!"
          }
        },
        {
          "name": "Migrar Usu√°rios para Planos",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planoPadrao\": \"BASICO_MENSAL\",\n  \"statusPadrao\": \"active\",\n  \"dataExpiracao\": null,\n  \"dryRun\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-users-to-plans",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-users-to-plans"]
            },
            "description": "Migra usu√°rios existentes para planos. dryRun=true apenas simula sem aplicar mudan√ßas. Requer autentica√ß√£o admin."
          }
        },
        {
          "name": "Migrar Usu√°rios - Dry Run",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planoPadrao\": \"BASICO_MENSAL\",\n  \"statusPadrao\": \"active\",\n  \"dryRun\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-users-to-plans",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-users-to-plans"]
            },
            "description": "Simula migra√ß√£o sem aplicar mudan√ßas (dryRun=true)"
          }
        },
        {
          "name": "Migrar Campos de Integridade de Dados",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-data-integrity-fields",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-data-integrity-fields"]
            },
            "description": "Adiciona campos de integridade (ativo, arquivado) em dados existentes. dryRun=true apenas simula sem aplicar mudan√ßas. Requer autentica√ß√£o admin."
          }
        },
        {
          "name": "Migrar Campos de Integridade - Dry Run",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-data-integrity-fields",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-data-integrity-fields"]
            },
            "description": "Simula migra√ß√£o de campos de integridade sem aplicar mudan√ßas (dryRun=true)"
          }
        },
        {
          "name": "Atualizar Planos e Funcionalidades dos Usu√°rios",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"apenasAtivas\": true,\n  \"dryRun\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/atualizar-planos-usuarios",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "atualizar-planos-usuarios"]
            },
            "description": "Atualiza planos e funcionalidades de todos os usu√°rios que t√™m assinaturas. Use ap√≥s atualizar planos via seed.\n\nüìã Par√¢metros:\n- apenasAtivas (boolean): true = apenas assinaturas ativas, false = todas (padr√£o: true)\n- dryRun (boolean): true = apenas simula sem aplicar mudan√ßas (padr√£o: false)\n\nüîÑ O que faz:\n1. Busca todas as assinaturas (ativas ou todas)\n2. Para cada assinatura, busca o plano atualizado\n3. Atualiza a assinatura com as novas funcionalidades do plano\n4. Sincroniza o plano no usu√°rio (atualiza cache)\n5. Registra hist√≥rico de altera√ß√µes\n\nüí° Use dryRun=true primeiro para testar sem aplicar mudan√ßas.\n\n‚ö†Ô∏è Execute este endpoint ap√≥s atualizar planos via seed!"
          }
        },
        {
          "name": "Atualizar Planos - Dry Run",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"apenasAtivas\": true,\n  \"dryRun\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/atualizar-planos-usuarios",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "atualizar-planos-usuarios"]
            },
            "description": "Simula atualiza√ß√£o de planos sem aplicar mudan√ßas (dryRun=true)"
          }
        },
        {
          "name": "Migrar ENTERPRISE_MENSAL ‚Üí PREMIUM_MENSAL",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-enterprise-to-premium",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-enterprise-to-premium"]
            },
            "description": "Migra usu√°rios de ENTERPRISE_MENSAL para PREMIUM_MENSAL.\n\nüîÑ O que faz:\n1. Busca todas as assinaturas com plano ENTERPRISE_MENSAL\n2. Busca o novo plano PREMIUM_MENSAL\n3. Atualiza as assinaturas para o novo plano\n4. Atualiza os usu√°rios (cache)\n5. Registra hist√≥rico de migra√ß√£o\n\nüìã Par√¢metros:\n- dryRun (boolean): true = apenas simula sem aplicar mudan√ßas (padr√£o: false)\n\nüí° Use dryRun=true primeiro para testar sem aplicar mudan√ßas.\n\n‚ö†Ô∏è IMPORTANTE: Execute o seed primeiro para garantir que o plano PREMIUM_MENSAL existe!"
          }
        },
        {
          "name": "Migrar ENTERPRISE ‚Üí PREMIUM - Dry Run",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-enterprise-to-premium",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-enterprise-to-premium"]
            },
            "description": "Simula migra√ß√£o de ENTERPRISE_MENSAL para PREMIUM_MENSAL sem aplicar mudan√ßas (dryRun=true)"
          }
        },
        {
          "name": "Migrar Estrutura de Assinatura dos Usu√°rios",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-user-assinatura-structure",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-user-assinatura-structure"]
            },
            "description": "Migra estrutura de assinatura dos usu√°rios para formato consolidado.\n\nüîÑ O que faz:\n1. Busca todos os usu√°rios\n2. Identifica usu√°rios com campos antigos de assinatura na raiz (planoId, planoNome, etc.)\n3. Busca a assinatura real na cole√ß√£o assinaturas\n4. Constr√≥i objeto assinatura consolidado (user.assinatura)\n5. Remove campos antigos da raiz usando deleteField()\n\nüìã Migra√ß√£o de campos:\n- assinaturaId ‚Üí assinatura.id\n- planoId ‚Üí assinatura.planoId\n- planoNome ‚Üí assinatura.planoNome\n- planoCodigoHotmart ‚Üí assinatura.planoCodigoHotmart\n- funcionalidadesHabilitadas ‚Üí assinatura.funcionalidadesHabilitadas\n- assinaturaStatus ‚Üí assinatura.status\n- pagamentoEmDia ‚Üí assinatura.pagamentoEmDia\n- dataExpiraAssinatura ‚Üí assinatura.dataExpira\n- dataProximoPagamento ‚Üí assinatura.dataProximoPagamento\n\nüìã Par√¢metros:\n- dryRun (boolean): true = apenas simula sem aplicar mudan√ßas (padr√£o: false)\n\nüí° Use dryRun=true primeiro para testar sem aplicar mudan√ßas.\n\n‚ö†Ô∏è Este endpoint atualiza a estrutura de dados dos usu√°rios. Execute ap√≥s atualizar o c√≥digo!"
          }
        },
        {
          "name": "Migrar Estrutura de Assinatura - Dry Run",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-user-assinatura-structure",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-user-assinatura-structure"]
            },
            "description": "Simula migra√ß√£o de estrutura de assinatura sem aplicar mudan√ßas (dryRun=true)"
          }
        },
        {
          "name": "Adicionar Assinatura para Usu√°rios sem Plano",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planoPadrao\": \"BASICO_MENSAL\",\n  \"statusPadrao\": \"active\",\n  \"dryRun\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/adicionar-assinatura-usuarios-sem-plano",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "adicionar-assinatura-usuarios-sem-plano"]
            },
            "description": "Adiciona assinatura padr√£o para usu√°rios que n√£o t√™m nenhuma assinatura.\n\nüîÑ O que faz:\n1. Busca todos os usu√°rios (exceto admin)\n2. Identifica usu√°rios sem assinatura (nem na cole√ß√£o assinaturas, nem no objeto user.assinatura)\n3. Cria uma assinatura padr√£o para esses usu√°rios\n4. Sincroniza a assinatura no objeto user.assinatura\n\nüìã Par√¢metros:\n- planoPadrao (string): C√≥digo do plano a ser atribu√≠do (padr√£o: BASICO_MENSAL)\n- statusPadrao (string): Status da assinatura - 'active', 'trial', etc. (padr√£o: 'active')\n- dryRun (boolean): true = apenas simula sem aplicar mudan√ßas (padr√£o: false)\n\nüí° Use dryRun=true primeiro para testar sem aplicar mudan√ßas.\n\n‚ö†Ô∏è Este endpoint cria assinaturas reais na cole√ß√£o assinaturas!"
          }
        },
        {
          "name": "Adicionar Assinatura - Dry Run",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planoPadrao\": \"BASICO_MENSAL\",\n  \"statusPadrao\": \"active\",\n  \"dryRun\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/adicionar-assinatura-usuarios-sem-plano",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "adicionar-assinatura-usuarios-sem-plano"]
            },
            "description": "Simula adi√ß√£o de assinaturas sem aplicar mudan√ßas (dryRun=true)"
          }
        },
        {
          "name": "Migrar Subcollections de Usu√°rio (Firestore ‚Üí Supabase)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"1AGkVjDbaqWOwk5tg3mHje11PaD2\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-user-subcollections",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-user-subcollections"]
            },
            "description": "Migra subcollections de eventos de um usu√°rio espec√≠fico do Firestore para o Supabase.\n\nüîÑ O que migra:\n- pagamentos (de eventos/{eventoId}/pagamentos)\n- custos (de eventos/{eventoId}/custos)\n- servi√ßos (de eventos/{eventoId}/servicos)\n- anexos_eventos (de eventos/{eventoId}/controle_anexos_eventos)\n- canais_entrada (de controle_users/{userId}/canais_entrada)\n\nüìã Par√¢metros:\n- userId (string, obrigat√≥rio): ID do usu√°rio no Firestore (ex: 1AGkVjDbaqWOwk5tg3mHje11PaD2)\n\n‚ú® Caracter√≠sticas:\n- Usa SUPABASE_SERVICE_ROLE_KEY para bypassar RLS\n- Insere apenas novos registros (n√£o faz upsert)\n- Verifica exist√™ncia antes de inserir (evita duplicatas)\n- Extrai userId e eventoId do path do Firestore\n- Converte Timestamps do Firestore para ISO strings\n- Retorna estat√≠sticas detalhadas da migra√ß√£o\n\nüí° Use este endpoint para migrar dados que n√£o foram migrados corretamente na migra√ß√£o inicial.\n\n‚ö†Ô∏è IMPORTANTE: Execute apenas para usu√°rios espec√≠ficos. O script processa todos os eventos do usu√°rio."
          }
        },
        {
          "name": "Migrar s3_key dos Anexos (Firestore ‚Üí Supabase)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (ou usar SEED_API_KEY no .env)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"1AGkVjDbaqWOwk5tg3mHje11PaD2\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/migrate-anexos-s3-keys",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "migrate-anexos-s3-keys"]
            },
            "description": "Migra s3_key dos anexos do Firestore para o Supabase.\n\nüîÑ O que faz:\n- Busca todos os anexos do Firestore que t√™m s3Key\n- Encontra os anexos correspondentes no Supabase (por ID ou evento_id + nome)\n- Atualiza o campo s3_key no Supabase\n- Retorna relat√≥rio detalhado da migra√ß√£o\n\nüìã Par√¢metros:\n- userId (string, opcional): ID do usu√°rio espec√≠fico. Se n√£o fornecido, migra todos os usu√°rios\n\n‚ú® Caracter√≠sticas:\n- Matching inteligente: primeiro tenta por ID do Firestore, depois por evento_id + nome\n- Atualiza apenas se s3_key for diferente (evita atualiza√ß√µes desnecess√°rias)\n- Retorna estat√≠sticas detalhadas (total, atualizados, n√£o encontrados, erros)\n- Retorna collection com detalhes de cada anexo processado\n- Processa todos os eventos de todos os usu√°rios (ou usu√°rio espec√≠fico)\n\nüí° Use este endpoint quando os anexos j√° est√£o no Supabase mas faltam as s3_key.\n\n‚ö†Ô∏è IMPORTANTE: Execute ap√≥s garantir que os anexos foram migrados para o Supabase. Este endpoint apenas atualiza as s3_key."
          }
        },
        {
          "name": "Gerar Eventos Aleat√≥rios (Teste de Estresse)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "dev-seed-key-2024",
                "description": "API key para bypass de autentica√ß√£o em dev (opcional)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"usuario@exemplo.com\",\n  \"quantidadeEventos\": 100,\n  \"custos\": true,\n  \"pagamento\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/generate-events",
              "host": ["{{base_url}}"],
              "path": ["api", "test", "generate-events"]
            },
            "description": "Gera eventos aleat√≥rios para testes de estresse. Par√¢metros: email (string) - email da conta, quantidadeEventos (number) - n√∫mero de eventos (1-1000), custos (boolean) - adiciona 3 custos por evento, pagamento (boolean) - adiciona pagamento por evento. Cada evento inclui: cliente aleat√≥rio, tipo de evento aleat√≥rio, status aleat√≥rio, 2 servi√ßos aleat√≥rios. Ignora valida√ß√µes de plano."
          }
        }
      ]
    },
    {
      "name": "Google Calendar",
      "item": [
        {
          "name": "Status da Conex√£o",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/google-calendar/status",
              "host": ["{{base_url}}"],
              "path": ["api", "google-calendar", "status"]
            },
            "description": "Obt√©m o status da conex√£o com Google Calendar. Retorna se est√° conectado, se sincroniza√ß√£o est√° ativa, email da conta, etc. Requer autentica√ß√£o."
          }
        },
        {
          "name": "Iniciar Conex√£o OAuth",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/google-calendar/auth?force=false",
              "host": ["{{base_url}}"],
              "path": ["api", "google-calendar", "auth"],
              "query": [
                {
                  "key": "force",
                  "value": "false",
                  "description": "Se true, for√ßa nova autoriza√ß√£o mesmo se j√° autorizou antes"
                }
              ]
            },
            "description": "Inicia o fluxo OAuth do Google Calendar. Redireciona para p√°gina de autoriza√ß√£o do Google. Requer autentica√ß√£o e plano permitido (Profissional ou Premium)."
          }
        },
        {
          "name": "Desconectar Google Calendar",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/google-calendar/disconnect",
              "host": ["{{base_url}}"],
              "path": ["api", "google-calendar", "disconnect"]
            },
            "description": "Desconecta a conta do Google Calendar. Remove tokens armazenados. Requer autentica√ß√£o."
          }
        },
        {
          "name": "Ativar/Desativar Sincroniza√ß√£o",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"syncEnabled\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/google-calendar/toggle-sync",
              "host": ["{{base_url}}"],
              "path": ["api", "google-calendar", "toggle-sync"]
            },
            "description": "Ativa ou desativa a sincroniza√ß√£o autom√°tica com Google Calendar. Requer autentica√ß√£o e conex√£o ativa."
          }
        },
        {
          "name": "Informa√ß√µes de Debug",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/google-calendar/debug",
              "host": ["{{base_url}}"],
              "path": ["api", "google-calendar", "debug"]
            },
            "description": "Retorna informa√ß√µes detalhadas de debug sobre tokens, conex√£o e valida√ß√£o. Inclui access token, refresh token, status de expira√ß√£o, valida√ß√£o do token, etc. √ötil para desenvolvimento. Requer autentica√ß√£o."
          }
        },
        {
          "name": "Criar Evento no Google Calendar",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"summary\": \"Reuni√£o com cliente\",\n  \"description\": \"Discuss√£o sobre novo projeto\",\n  \"startDateTime\": \"2025-01-20T14:00:00\",\n  \"endDateTime\": \"2025-01-20T15:30:00\",\n  \"location\": \"Rua das Flores, 123 - S√£o Paulo, SP\",\n  \"timeZone\": \"America/Sao_Paulo\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/google-calendar/events",
              "host": ["{{base_url}}"],
              "path": ["api", "google-calendar", "events"]
            },
            "description": "Cria um evento diretamente no Google Calendar. Campos obrigat√≥rios: summary, startDateTime. Campos opcionais: description, endDateTime, location, timeZone (padr√£o: America/Sao_Paulo). Requer autentica√ß√£o, plano permitido e sincroniza√ß√£o ativa."
          }
        },
        {
          "name": "For√ßar Renova√ß√£o do Token",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/google-calendar/refresh-token",
              "host": ["{{base_url}}"],
              "path": ["api", "google-calendar", "refresh-token"]
            },
            "description": "For√ßa a renova√ß√£o do access token usando o refresh token. √ötil quando o token est√° expirado ou inv√°lido. Requer autentica√ß√£o e conex√£o ativa."
          }
        }
      ]
    },
    {
      "name": "Webhook Hotmart - Mock (Testes)",
      "description": "Endpoints mock para simular webhooks da Hotmart sem usar sandbox ou produ√ß√£o",
      "item": [
        {
          "name": "Mock - Documenta√ß√£o (GET)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"]
            },
            "description": "Retorna documenta√ß√£o do endpoint mock com exemplos e eventos dispon√≠veis"
          }
        },
        {
          "name": "Mock - PURCHASE_APPROVED (B√°sico)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=PURCHASE_APPROVED&email={{email}}&plan_code=BASICO_MENSAL",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "PURCHASE_APPROVED" },
                { "key": "email", "value": "{{email}}" },
                { "key": "plan_code", "value": "BASICO_MENSAL" }
              ]
            },
            "description": "Simula compra aprovada do plano B√°sico"
          }
        },
        {
          "name": "Mock - PURCHASE_APPROVED (Profissional)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=PURCHASE_APPROVED&email={{email}}&plan_code=PROFISSIONAL_MENSAL",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "PURCHASE_APPROVED" },
                { "key": "email", "value": "{{email}}" },
                { "key": "plan_code", "value": "PROFISSIONAL_MENSAL" }
              ]
            },
            "description": "Simula compra aprovada do plano Profissional"
          }
        },
        {
          "name": "Mock - PURCHASE_APPROVED (Premium)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=PURCHASE_APPROVED&email={{email}}&plan_code=PREMIUM_MENSAL",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "PURCHASE_APPROVED" },
                { "key": "email", "value": "{{email}}" },
                { "key": "plan_code", "value": "PREMIUM_MENSAL" }
              ]
            },
            "description": "Simula compra aprovada do plano Premium"
          }
        },
        {
          "name": "Mock - SWITCH_PLAN (B√°sico ‚Üí Profissional)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=SWITCH_PLAN&email={{email}}&new_plan_code=PROFISSIONAL_MENSAL",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "SWITCH_PLAN" },
                { "key": "email", "value": "{{email}}" },
                { "key": "new_plan_code", "value": "PROFISSIONAL_MENSAL" }
              ]
            },
            "description": "Simula troca de plano de B√°sico para Profissional"
          }
        },
        {
          "name": "Mock - SWITCH_PLAN (Profissional ‚Üí Premium)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=SWITCH_PLAN&email={{email}}&new_plan_code=PREMIUM_MENSAL",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "SWITCH_PLAN" },
                { "key": "email", "value": "{{email}}" },
                { "key": "new_plan_code", "value": "PREMIUM_MENSAL" }
              ]
            },
            "description": "Simula troca de plano de Profissional para Premium"
          }
        },
        {
          "name": "Mock - UPDATE_SUBSCRIPTION_CHARGE_DATE",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=UPDATE_SUBSCRIPTION_CHARGE_DATE&email={{email}}&new_charge_date=2025-02-15T00:00:00.000Z",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "UPDATE_SUBSCRIPTION_CHARGE_DATE" },
                { "key": "email", "value": "{{email}}" },
                { "key": "new_charge_date", "value": "2025-02-15T00:00:00.000Z" }
              ]
            },
            "description": "Simula atualiza√ß√£o de data de cobran√ßa da assinatura"
          }
        },
        {
          "name": "Mock - SUBSCRIPTION_CANCELLATION",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=SUBSCRIPTION_CANCELLATION&email={{email}}",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "SUBSCRIPTION_CANCELLATION" },
                { "key": "email", "value": "{{email}}" }
              ]
            },
            "description": "Simula cancelamento de assinatura"
          }
        },
        {
          "name": "Mock - SUBSCRIPTION_EXPIRED",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=SUBSCRIPTION_EXPIRED&email={{email}}",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "SUBSCRIPTION_EXPIRED" },
                { "key": "email", "value": "{{email}}" }
              ]
            },
            "description": "Simula expira√ß√£o de assinatura"
          }
        },
        {
          "name": "Mock - PURCHASE_CHARGEBACK",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=PURCHASE_CHARGEBACK&email={{email}}",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "PURCHASE_CHARGEBACK" },
                { "key": "email", "value": "{{email}}" }
              ]
            },
            "description": "Simula chargeback - suspende assinatura imediatamente"
          }
        },
        {
          "name": "Mock - PURCHASE_PROTEST",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=PURCHASE_PROTEST&email={{email}}",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "PURCHASE_PROTEST" },
                { "key": "email", "value": "{{email}}" }
              ]
            },
            "description": "Simula protesto de boleto - suspende assinatura"
          }
        },
        {
          "name": "Mock - PURCHASE_REFUNDED",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=PURCHASE_REFUNDED&email={{email}}",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "PURCHASE_REFUNDED" },
                { "key": "email", "value": "{{email}}" }
              ]
            },
            "description": "Simula reembolso - cancela assinatura imediatamente"
          }
        },
        {
          "name": "Mock - PURCHASE_DELAYED",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/webhooks/hotmart/mock?event=PURCHASE_DELAYED&email={{email}}",
              "host": ["{{base_url}}"],
              "path": ["api", "webhooks", "hotmart", "mock"],
              "query": [
                { "key": "event", "value": "PURCHASE_DELAYED" },
                { "key": "email", "value": "{{email}}" }
              ]
            },
            "description": "Simula pagamento atrasado - suspende temporariamente"
          }
        }
      ]
    }
  ]
}

